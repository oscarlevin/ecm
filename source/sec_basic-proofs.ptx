<?xml version="1.0" encoding="UTF-8"?>
<section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="sec_basic-proofs">
  <title>Proofs in Combinatorics</title>

  <introduction>
    <p>
      <!-- We have already seen some basic proof techniques when we considered graph theory: direct proofs, proof by contrapositive, proof by contradiction, and proof by induction.   -->
      In this section, we will consider a few proof techniques particular to combinatorics.  Along the way we will establish some basic counting principles and further develop our understanding of binomial coefficients.
    </p>

    <p>
      Why do we care about proofs?  It is not because we doubt the truth of so called theorems or wish to establish new results to further mathematics as an academic discipline (although there is nothing wrong with doing that as well).  Rather, it is through creating proofs that we gain a deeper understanding of the big ideas present in this subject.
    </p>
  </introduction>

  <subsection xml:id="subsec-basic-proofs-examples">
    <title>Two Motivating Examples</title>

    <p>
      To get started, let's consider two typical statements in combinatorics which we might wish to prove.
    </p>

    <theorem xml:id="thm-pascalsym">
      <statement>
        <p>
          For all <m>n \ge 0</m> and all <m>0 \le k \le n</m> we have <m>\binom{n}{k} = \binom{n}{n-k}</m>.  In other words, Pascal's triangle is symmetric reflected over its vertical altitude.
        </p>
      </statement>
    </theorem>


    <theorem xml:id="thm-pascalrowsum">
      <statement>
        <p>
          For all <m>n \ge 0</m>, we have <m>\sum_{k=0}^n \binom{n}{k} = 2^n</m>.  That is, the sum of the entries in the <m>n</m>th row of Pascal's triangle is <m>2^n</m>.
        </p>
      </statement>
    </theorem>

    <p>
      These are just two of the beautiful identities hidden in Pascal's triangle.  But why are they true?
    </p>

    <p>
      There are at least four very distinct proofs we could give for each of these theorems.  The next activities and examples will walk you through a few.
    </p>

    <p>
      Note: throughout this section especially, hints to problems are available.  Try the problem first, and if you get stuck, peek at the hint.
    </p>

    <p>
      First, let's try some proofs of <xref ref="thm-pascalsym"/>
    </p>

    <activity>
      <statement>
        <p>
          First, an algebraic proof.  We will see later that <m>\binom{n}{k} = \frac{n!}{k!(n-k)!}</m>, where <m>r! = r \cdot (r-1) \cdot (r-2) \cdot\cdots\cdot 2\cdot 1</m> (read <q><m>r</m> factorial</q>).  Using this algebraic formula, prove the identity <m>\binom{n}{k} = \binom{n}{n-k}</m>.
        </p>
      </statement>
      <hint>
        <p>
          This should be really easy, but don't let that fool you.  Note that a correct proof must start with one side of the identity and manipulate it into the other side.  The following is NOT a correct proof, because it starts by assuming the statement you wish to prove.

          <md>
            <mrow>\binom{n}{k}  = \amp \binom{n}{n-k}</mrow>
            <mrow>\frac{n!}{k!(n-k)!} =  \amp \frac{n!}{(n-k)!(n-(n-k)!)}</mrow>
            <mrow>\frac{n!}{k!(n-k)!} =  \amp \frac{n!}{(n-k)!k!)}</mrow>
            <mrow>\frac{n!}{k!(n-k)!} \cdot (k!(n-k)!)=  \amp \frac{n!}{(n-k)!(n-(n-k)!)}\cdot(k!(n-k)!)</mrow>
            <mrow>n! =  \amp n!</mrow>
          </md>
        </p>
      </hint>
      <solution>
        <p>
          We have
          <me>
            \binom{n}{k} = \frac{n!}{k!(n-k)!} = \frac{n!}{(n-k)!(n-(n-k))!} = \binom{n}{n-k}
          </me>

        </p>
      </solution>
    </activity>

    <p>
      Note that this proof was not by any means difficult, but it did rely on an algebraic identity we have yet to prove.  We will see in <xref ref="act-pascalrowsum-alg"/> that algebraic proofs can be very messy.  What's more, algebraic proofs rarely explain <em>why</em> an identity is true.  They lack meaning.
    </p>

    <p>
      Slightly more meaning can be found in proofs by induction.  There at least you see the connection to the recursion defining the terms.  We give an example of such an argument here.
    </p>

    <example>
      <statement>
        <p>
          We claim the identity <m>\binom{n}{k} = \binom{n}{n-k}</m> is true for all <m>n \ge 0</m>, so induction would be a natural proof technique to try.  Give a proof by mathematical induction on <m>n</m>.
        </p>
      </statement>
      <!-- <hint>
        <p>
          You will probably want to use the Pascal recurrence <m>\binom{n}{k} = \binom{n-1}{k-1} + \binom{n-1}{k}</m>.  Note that once you pick your <m>n</m>, you should argue that the identity holds for all <m>0 \le k \le n</m>.  You should not do double induction.
        </p>
      </hint> -->
      <solution>
        <p>
          We will do induction on <m>n</m>.  For <m>n = 0</m>, the only value of <m>k</m> that is interesting is <m>k=0</m>, and here <m>\binom{n}{k} = \binom{0}{0} = \binom{n}{n-k}</m>.  Thus the base case is established.
        </p>

        <p>
          For the inductive case, fix an arbitrary <m>n</m> and assume that for all <m>k</m> with <m>0 \le k \le n-1</m> we have <m>\binom{n-1}{k} = \binom{n-1}{(n-1)-k}</m>.  Consider <m>\binom{n}{k}</m> for an arbitrary <m>0 \le k \lt n</m>.  By the recurssion for Pascal's triangle, we have
          <me>
            \binom{n}{k} = \binom{n-1}{k-1} + \binom{n-1}{k}.
          </me>
          Now apply the induction hypothesis to the right hand side.  We get
          <me>
            \binom{n-1}{k-1} + \binom{n-1}{k} = \binom{n-1}{n-1-(k-1)} + \binom{n-1}{n-1 -k} = \binom{n-1}{n-k} + \binom{n-1}{n-k-1}.
          </me>
          Then using the Pascal recurrence again, we get
          <me>
            \binom{n-1}{n-k} + \binom{n-1}{n-k-1} = \binom{n}{n-k}.
          </me>
          Thus <m>\binom{n}{k} = \binom{n}{n-k}</m>, as long as <m>0 \le k \lt n</m>.  The case where <m>k = n</m> is trivial as <m>\binom{n}{n} = \binom{n}{0} = 1</m>.
        </p>
      </solution>
    </example>

    <p>
      The next two proofs are examples of <term>combinatorial proofs</term>.  
    </p>

    <activity xml:id="act-pascalsym-dc">
      <introduction>
        <p>
          Think about what <m>\binom{n}{k}</m> counts.
        </p>
      </introduction>
      <task>
        <statement>
          <p>
            Suppose you own <m>n</m> bow ties, and want to choose <m>k</m> of them to take on a trip.  How many different collections of bow ties can you take?
          </p>
        </statement>
        <hint>
          <p>
            This is supposed to be very easy.
          </p>
        </hint>
        <solution>
          <p>
            The number of ways to select <m>k</m> bow ties from a set of <m>n</m> bow ties is <m>\binom{n}{k}</m>.
          </p>
        </solution>
      </task>
      <task>
        <statement>
          <p>
            Why is the answer to the above question also <m>\binom{n}{n-k}</m>?
          </p>
        </statement>
        <hint>
          <p>
            What if you started with all bow ties in the suitcase and got rid of some?  How many do you need to remove?
          </p>
        </hint>
        <solution>
          <p>
            First through all your <m>n</m> many bow ties into your suitcase.  Now select <m>n-k</m> bow ties to put (back) into your closet (leaving <m>k</m> in your suitcase).  There are <m>\binom{n}{n-k}</m> ways to select the set of bow ties that stay home.
          </p>
        </solution>
      </task>
      <task>
        <statement>
          <p>
            Why are the two parts above enough to establish the identity <m>\binom{n}{k} = \binom{n}{n-k}</m>?
          </p>
        </statement>
        <solution>
          <p>
            We have shown that the number of different suitcases of bow ties is both <m>\binom{n}{k}</m> and <m>\binom{n}{n-k}</m>, so in particular, these must be the same number.
          </p>
        </solution>
      </task>
    </activity>

    <p>
      Finally, here is a subtly different proof.
    </p>

    <activity xml:id="act-pascalsym-bij">
      <introduction>
        <p>
          Consider the set <m>[n] = \{1,2,\ldots,n\}</m> and its power set <m>\pow([n])</m> of all subsets of <m>[n]</m>.  Define the function <m>f:\pow([n]) \to \pow([n])</m> by <m>f(A) = [n]\setminus A</m> for any <m>A \in \pow([n])</m> (that is, <m>f(A)</m> is the complement of <m>A</m> in <m>[n]</m>).
        </p>
      </introduction>
      <task>
        <statement>
          <p>
            Prove that <m>f</m> is a bijection.  In fact, <m>f</m> is an <term>involution</term> in that it is its own inverse.
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            For any set <m>A \in \pow([n])</m>, if <m>\card{A} = k</m>, what is the <m>\card{f(A)}</m>?
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Is <m>f</m> still a bijection if we restrict it to just the subsets of <m>[n]</m> that have size <m>k</m>?  Perhaps we should also restrict our codomain (to what?).  Explain.
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Why is the above enough to establish the identity <m>\binom{n}{k} = \binom{n}{n-k}</m>?
          </p>
        </statement>
        <hint>
          <p>
            Recall the bijection principle tells us that if <m>f:X \to Y</m> is a bijection, then <m>\card{X} = \card{Y}</m>.  What is the cardinality of each of the subsets of <m>\pow([n])</m> that we are considering?
          </p>
        </hint>
      </task>
    </activity>

    <p>
      How are <xref ref="act-pascalsym-dc"/> and <xref ref="act-pascalsym-bij"/> different?  The first consists of answering a single counting question in two different ways, and those ways are the two sides of the identity.  Such proofs are sometimes called <em>double counting proofs</em>, or sometimes just <em>combinatorial proofs</em>.  On the other hand, <xref ref="act-pascalsym-bij"/> proceeds by showing two different sets have the same size, using a bijection, and shows that these two sets are counted by each side of the identity.  These proofs are called <em>bijective proofs</em> (and are also sometimes grouped together with double counting proofs as combinatorial proofs). 
    </p>

    <p>
      Here is yet another combinatorial proof of the identity <m>\binom{n}{k} = \binom{n}{n-k}</m>.  We give both double counting and bijective variants.
    </p>

    <example>
      <statement>
        <p>
          Prove that <m>\binom{n}{k} = \binom{n}{n-k}</m> using bit strings.
        </p>
      </statement>
      <solution>
        <p>
          <m>\binom{n}{k}</m> counts the number of <m>n</m>-bit strings of weight <m>k</m>.  This is because of the <m>n</m> bits, we must choose <m>k</m> to be 1's, which can be done in <m>\binom{n}{k}</m> ways.  The number of <m>n</m>-bit strings of weight <m>k</m> is also <m>\binom{n}{n-k}</m>, since of the <m>n</m> bits, we must choose <m>n-k</m> to be 0's (making the remaining <m>k</m> 1's), which can be done in <m>\binom{n}{n-k}</m> ways.  Thus <m>\binom{n}{k} = \binom{n}{n-k}</m>. 
        </p>

        <p>
          The above is a complete proof, but really <m>\binom{n}{k}</m> can be thought of as <em>defined</em> as the size of the set <m>\B^n_k</m>.  But then <m>\binom{n}{n-k}</m> is the size of the set <m>\B^n_{n-k}</m>.  So what we are really saying here is that <m>|\B^n_k| = |\B^n_{n-k}|</m>, which is true because the function that switches 0's to 1's and 1's to 0's in a bit string is a bijection between these two sets.
        </p>
      </solution>
    </example>


    <p>
      Both styles of combinatorial proof have the advantage that they do an excellent job of illustrating what is really going on in an identity.  They reinforce our understanding of how to solve counting problems and our understanding of basic combinatorial principles.
    </p>

    <p>
      This is not to say that other proof techniques, especially mathematical induction, are not also helpful.  Inductive proofs demonstrate the importance of the recursive nature of combinatorics.  Even if we didn't know what Pascal's triangle told us about the real world, we would see that the identity was true entirely based on the recursive definition of its entries.
    </p>

    <p>
      Now here are four proofs of <xref ref="thm-pascalrowsum"/>.
    </p>

    <activity xml:id="act-pascalrowsum-alg">
      <statement>
        <p>
          Using the formula <m>\binom{n}{k} = \frac{n!}{k!(n-k!)}</m>, you should be able to find a common denominator in the sum <m>\sum_{k=0}^n \binom{n}{k}</m> and show that this simplifies to <m>2^n</m>.
        </p>
      </statement>
      <hint>
        <p>
          We say <q>should</q>, but please don't waste your time doing this all the way out.  Unless you are really bored.
        </p>
      </hint>
    </activity>


    <activity>
      <statement>
        <p>
          We wish to establish the identity <m>\sum_{k=0}^n \binom{n}{k} = 2^n</m> for all natural numbers <m>n</m>, so it would be natural to give a proof by induction.  Do this.
        </p>
      </statement>
      <hint>
        <p>
          Again, use the Pascal recurrence <m>\binom{n}{k} = \binom{n-1}{k-1} + \binom{n-1}{k}</m>.  Doing this for all summands will give you some repeats.
        </p>
      </hint>
      <solution>
        <p>
          The base case is trivial: <m>\binom{0}{0} = 1 = 2^0</m>.  Now fix <m>n \gt 0</m> and assume <m>\sum_{k=0}^{n-1} \binom{n-1}{k} 2^{n-1}</m>.
        </p>

        <p>
          Consider the case for <m>n</m>.  This is easier to see when written out.
          <md>
            <mrow>\binom{n}{0} + \binom{n}{1} \amp + \cdots + \binom{n}{n-1}  + \binom{n}{n} = </mrow>
            <mrow>\binom{n-1}{0} + \left[\binom{n-1}{0} + \binom{n-1}{1}\right] \amp + \cdots + \left[\binom{n-1}{n-2} + \binom{n-1}{n-1}\right] + \binom{n-1}{n-1}.</mrow>
          </md>
          We have replaced <m>\binom{n}{0}</m> with <m>\binom{n-1}{0}</m> and <m>\binom{n}{n}</m> with <m>\binom{n-1}{n-1}</m> since they are all 1.  Every other term is replaced using the Pascal recurrence.
        </p>

        <p>
          But notice now that for every <m>k</m>, we have <m>\binom{n-1}{k}</m> appearing exactly twice.  So if we group like terms and factor out a 2, we get
          <me>
            \sum_{k=0}^n \binom{n}{k} = 2 \sum_{k=0}^{n-1} \binom{n-1}{k} = 2 \cdot 2^{n-1} = 2^n.
          </me>
          This completes the inductive case, and therefore the proof.
        </p>
      </solution>
    </activity>

    <p>
      There are lots of ways to give a combinatorial proof.  Here is one.
    </p>

    <activity xml:id="activity-pascalrow-dc">
      <introduction>
        <p>
          Consider the question: how many subsets of <m>[n]</m> are there?
        </p>
      </introduction>
      <task>
        <statement>
          <p>
            How many subsets have cardinality 0?  How many have cardinality 1?  And so on.  How many would all of these give us all together?
          </p>
        </statement>
        <hint>
          <p>
            Your final answer here should be a sum, since we have counted the number of subsets partitioned into disjoint collections.  You will be using the sum principle, which we will formally introduce in the next subsection.
          </p>
        </hint>
        <solution>
          <p>
            There are <m>\binom{n}{0}</m> subsets of size 0, <m>\binom{n}{1}</m> subsets of size 1, and so on, with <m>\binom{n}{k}</m> subsets of size <m>k</m>.  The total number of subsets is then the sum of these numbers: <m>\sum_{k=0}^n \binom{n}{k}</m>.
          </p>
        </solution>
      </task>
      <task>
        <statement>
          <p>
            Explain why the answer is also <m>2^n</m>.
          </p>
        </statement>
        <hint>
          <p>
            Think about how many choices you have for each element.  You could put 1 in the subset or not.  You could include <m>2</m> in the subset or not.
          </p>
        </hint>
        <solution>
          <p>
            For each element in <m>[n]</m> we can either include it in the subset or not.  So there are two choices for whether <m>1</m> is in the subset, two choices for <m>2</m> and so on.  This gives <m>2^n</m> subsets.  You can also picture this is a tree diagram, making it very clear why you multiply each 2.
          </p>
        </solution>
      </task>
      <conclusion>
        <p>
          Conclude: Since each side of the identity is the answer to the same counting question, we have established the identity.
        </p>
      </conclusion>
    </activity>

    <p>
      We will not give a bijective proof, although you might include this as part of the above if you didn't see why <m>2^n</m> was the number of subsets of <m>[n]</m>.  Instead, you might see directly that <m>2^n</m> is the number of <m>n</m>-bit strings (by writing the numbers 0 through <m>2^n - 1</m> in binary) and then define a bijection from <m>n</m>-bit strings to subsets of <m>[n]</m>.
    </p>

    <p>
      Finally, here is a clever proof of the identity.
    </p>

    <activity xml:id="act-pascalrowsum-binom">
      <statement>
        <p>
          What does the binomial theorem say again?  That is, expand <m>(x+y)^n</m>.  What happens when you substitute <m>x = y = 1</m>?
        </p>
      </statement>
      <hint>
        <p>
          Just do it.
        </p>
      </hint>
      <solution>
        <p>
          We have <m>(x+y)^n = \sum_{k=0}^n \binom{n}{k} x^{n-k}y^k</m> by the binomial theorem.  When you substitute <m>x = y = 1</m> you get
          <me>
            (1+1)^n = \sum_{k=0}^n \binom{n}{k} 1^{n-k}1^k
          </me>
          <me>
            2^n = \sum_{k=0}^n \binom{n}{k}.
          </me>

        </p>
      </solution>
    </activity>

    <p>
      This use of the binomial theorem is an example of one of the many uses for <em>generating functions</em> which we will return to later.  For now, you might enjoy plugging in other values to the binomial theorem to uncover new binomial identities.
    </p>

  </subsection>

  <subsection xml:id="subsec-sumprod">
    <title>Interlude: The Sum and Product Principles</title>

    <p>
      Any proof you write in mathematics must assume some foundational principles.  In Euclidean geometry, you have axioms, common notions, and often other propositions, used as justification in your proof.  Let's pause to consider two foundational principles in combinatorics that, while intuitively obvious, are worth pointing out as foundational.
    </p>

    <activity>
      <task>
        <p>A restaurant offers 8 appetizers and 14 entrées. How many choices do you have if:

            <ol>
              <li> you will eat one dish, either an appetizer or an entrée?
              </li>
              <li>
                you are extra hungry and want to eat both an appetizer and an entrée?
              </li>
            </ol>
          </p>
        </task>

          <task>
            <p>Think about the methods you used to solve question (a). Write down the rules for these methods.</p>
          </task>


          <task>
            <p>Do your rules work? A standard deck of playing cards has 26 red cards and 12 face cards.
            <ol>
              <li>
                <p>
                  How many ways can you select a card which is either red or a face card?
                </p>
              </li>
              <li>
                <p>
                  How many ways can you select a card which is both red and a face card?
                </p>
              </li>
              <li>
                <p>
                  How many ways can you select two cards so that the first one is red and the second one is a face card?
                </p>
              </li>
            </ol>
          </p>
          </task>
    </activity>

    <p>
      When solving a counting question, it is often advantageous to break the problem into parts.  If you think of the counting question as asking how many ways there are to complete a task, then you might break that task up in various ways, count the number of ways to complete each sub-task, and them combine those somehow to get the number of ways to complete the overall task.  How do you combine them?
    </p>

    <assemblage>
      <title>Sum Principle</title>
      <p>
        The
        <term>sum principle</term><idx><h>sum principle</h></idx> states that if task <m>A</m> can be completed in <m>m</m> ways, and task <m>B</m> can be completed in <m>n</m>
        <em>disjoint</em> ways, then completing <q><m>A</m> or <m>B</m></q> is a task that can be completed in <m>m + n</m> ways.
      </p>
    </assemblage>

    <assemblage>
      <title>Product Principle</title>
      <p>
        The
        <term>product principle</term><idx><h>product principle</h></idx> states that if task <m>A</m> can be completed in <m>m</m> ways, and each possibility for <m>A</m> allows for exactly <m>n</m> ways for task <m>B</m> to be completed, then the task <q><m>A</m> and <m>B</m></q> (or <q><m>A</m> followed by <m>B</m></q>) can be completed in <m>m \cdot n</m> ways.
      </p>
    </assemblage>

    <p>
      Note, both the sum and product principles are true for more than two subtasks.  You could prove this easily by induction using the principles for two sets as your base case.  But how do we know the principles for two sets are true?
    </p>

    <p>
      To make the sum and product principles more mathematically rigorous, consider operations on sets.
    </p>

    <proposition xml:id="prop-unioncard">
      <statement>
        <p>
          If <m>A</m> and <m>B</m> are finite, disjoint sets (so <m>A \cap B = \emptyset</m>) then <m>\card{A \cup B} = \card{A} + \card{B}</m>.
        </p>
      </statement>
    </proposition>

    <p>
      This suggests that the union of (disjoint) sets somehow corresponds to the <em>disjunction</em> (or) of completing tasks.  You might guess that the set operation that corresponds to <em>conjunction</em> (and) of tasks is set intersection.  But this cannot be correct: the intersection of two sets is no larger than the smallest of the two sets, while combining tasks with conjunction apparently corresponds to multiplication.
    </p>
    <p>
      A better way to think of the conjunction is as <em>concatenation</em>.  You are performing one task, <em>followed</em> by the other.  Recall that <m>A \times B = \{(a,b) \st a \in A, b \in B\}</m> is the <term>Cartesian product</term> of <m>A</m> and <m>B</m>; the set of all ordered pairs where the first element comes from <m>A</m> and the second from <m>B</m>.  This is exactly what we need.
    </p>

    <proposition xml:id="prop-prodcard">
      <statement>
        <p>
          If <m>A</m> and <m>B</m> are finite sets, then <m>\card{A \times B} = \card{A} \cdot \card{B}</m>
        </p>
      </statement>
    </proposition>

    <p>
      We could prove these two propositions without too much trouble.  Then we must explain what they have to do with the sum and product principles.
    </p>

    <activity>
      <task>
        <statement>
          <p>
            Explain why <xref ref="prop-unioncard"/> is true.
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            An incomplete deck of cards only has four face cards (the Jack, King and Queen of diamonds and the King of hearts) and five black cards (the 2 through 6 of spades).  A magician asks you to pick a card.  How many choices do you have?
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            How exactly does the counting question above relate to <xref ref="prop-unioncard"/>?  How exactly does it relate to the Sum Principle?  Illustrate both by listing specific outcomes.
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Make explicit the connection between the Sum Principle and <xref ref="prop-unioncard"/>.  That is, justify the Sum Principle in terms of cardinality of sets.
          </p>
        </statement>
      </task>
    </activity>

    <activity>
      <task>
        <statement>
          <p>
            Explain why <xref ref="prop-prodcard"/> is true.  Your explanation should make use of <xref ref="prop-unioncard"/>.
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Using the same incomplete deck of cards (containing the Jack, King and Queen of diamonds, King of hearts, and 2 through 6 of spades), the magician asks you to put any face card face down under any face down black card.  How many choices do you have for this two card stack?
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            How exactly does the counting question above relate to <xref ref="prop-prodcard"/>?  How exactly does it relate to the Product Principle?  Illustrate both by listing specific outcomes.
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Make explicit the connection between the Product Principle and <xref ref="prop-prodcard"/>.  That is, justify the Product Principle in terms of cardinality of sets.
          </p>
        </statement>
      </task>
    </activity>

    <p>
      The previous activity might obscure an important subtlety.  Perhaps you said that the set <m>A</m> corresponds to the face cards (or to the set of outcomes of the task of selecting a face card) and the set <m>B</m> corresponded to the black cards.  The set of outcomes of picking a two card stack is exactly then <m>A \times B</m>, so there are <m>4\cdot 5 = 20</m> outcomes.  This is completely correct.  But does it generalize?
    </p>

    <activity xml:id="act-cardstacks">
      <introduction>
        <p>
          Suppose the magician hands you 4 cards (the Ace, King, Queen, and Jack of clubs) and asks you to select any two cards (placing them face down in a stack).  How many choices do you have?  Assume the order the cards are placed down matters.
        </p>
      </introduction>
      <task>
        <p>
          If you divide the task into two sub-tasks, what are they?  How many ways can you complete the first task?  How many ways can you complete the second?  What is the final answer?
        </p>
      </task>
      <task>
        <p>
          If you think of this problem as counting a Cartesian product, what is set <m>A</m>?  What is set <m>B</m>?  What is wrong?
        </p>
      </task>
    </activity>

    <p>
      The Product Principle is not exactly analogous to finding the cardinality of a Cartesian product after all, since tasks <m>A</m> and <m>B</m> do not need to be disjoint.  How do we make sense of the Product Principle then?
    </p>

    <activity>
      <task>
        <p>
          Write out all stacks of cards that are possible outcomes in <xref ref="act-cardstacks"/>.  Arrange these into a rectangle of appropriate dimensions.
        </p>
      </task>
      <task>
        <p>
          How might you group the outcomes in a meaningful way?  How many groups and how many outcomes in each group?
        </p>
      </task>
      <task>
        <p>
          Find some sets <m>A</m> and <m>B</m> and a bijection between the outcomes (stacks of 2 cards) and the set <m>A \times B</m>.  Describe how this would work in general.
        </p>
      </task>
    </activity>

    <p>
      To illustrate just how fundamental these two principles are, here are a few counting problems that can be solved with them.  For each of these, say exactly where and how the sum and product principles are used.
    </p>

    <exploration xml:id="act-latticepaths2">
      <introduction>
        <p>
          We have seen that the number of lattice paths from <m>(0,0)</m> to <m>(x,y)</m> is given by <m>\binom{x+y}{x}</m>.  Now with the sum and product principles, we can answer lots of questions about lattice paths.
        </p>
      </introduction>
      <task>
        <statement>
          <p>
            How many lattice paths from <m>(0,0)</m> to <m>(10,10)</m> pass through the point <m>(4,7)</m>?
          </p>
        </statement>
        <hint>
          <p>
            Many students want this sort of question to be an example of the sum principle (presumably because to get an acceptable path you travel to <m>(4,7)</m> and then add on a path that gets you the rest of the way.  But notice that you are really concatenating two paths, and there are lots of choices for the first path and lots for the second.  This sounds more like an ordered pair.
          </p>
        </hint>
      </task>
      <task>
        <statement>
          <p>
            How many lattice paths from <m>(0,0)</m> to <m>(10,10)</m> do NOT pass through the point <m>(4,7)</m>?  In what way does this problem use the sum principle?
          </p>
        </statement>
        <hint>
          <p>
            If you knew the answer to this part and the previous part, what is another way you could compute the number of paths from <m>(0,0)</m> to <m>(10,10)</m>?
          </p>
        </hint>
      </task>
      <task>
        <statement>
          <p>
            How many lattice paths from <m>(0,0)</m> to <m>(10,10)</m> pass through <m>(4,7)</m> or <m>(7,4)</m>?
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Explain why can you NOT use the sum principle to answer this question: How many lattice paths from <m>(0,0)</m> to <m>(10,10)</m> pass through <m>(4,7)</m> or <m>(7,8)</m>?  What is the answer?
          </p>
        </statement>
        <hint>
          <p>
            Compare to the question about how many playing cards are either red or a face card, and why the answer is not <m>26 + 12</m>.
          </p>
        </hint>
      </task>
    </exploration>

    <p>
      The last part of the previous problem illustrates what can go wrong if the sets <m>A</m> and <m>B</m> are not disjoint.  In general, we have,
      <me>
        \card{A \cup B} = \card{A} + \card{B} - \card{A \cap B}.
      </me>
      This is an example of the <em>Principle of Inclusion/Exclusion</em>, which we will investigate further later.
    </p>

    <p>
      This next set of questions you can answer entirely using the product principle.  While all the activities ask questions with a general <m>n</m> and <m>k</m>, it would be a good idea to first try to answer the corresponding question with specific numbers and then generalize.
    </p>

  <exploration xml:id="SubsetsFirstTime" category="essential">
    <statement>
      <p>
        How many subsets does a set <m>S</m> with <m>n</m> elements have?
      </p>
    </statement>
    <hint>
      <p>
        Try applying the product principle in the case <m>n = 2</m> and <m>n = 3</m>. How might you apply it in general?
      </p>
    </hint>
    <solution>
      <p>
        For each of the <m>n</m> elements of <m>S</m>, we have two options:
        either we put the element into the subset or we do not. Thus, the
        general product principle tells us that there are <m>2^n</m> subsets of <m>S</m>.
      </p>
    </solution>
  </exploration>

<!-- bogart: -->
<exploration xml:id="tennispairings1" category="interesting">
    <introduction>
        <p>
    A tennis club has <m>2n</m> members. We want to pair up the
    members by twos for singles matches.
        </p>
    </introduction>
    <task>
        <statement>
            <p>
      In how many ways may we pair up all the members of the club? (Hint: consider the cases
        of 2, 4, and 6 members.)
            </p>
        </statement>
      <hint>
<p>
Suppose you have a list in alphabetical order of names of the members of the
club. In how many ways can you pair up the first person on the list? In how
many ways can you pair up the next person who isn't already paired up?
</p>
</hint>
      <solution>
        <p>
          Suppose we list the people in the club in some way, and keep that
          list for the remainder of the problem. Take the first person from the list
          and pair that person with any of the <m>2n-1</m> remaining people. Now take the
          next <em>unpaired</em> person from the list and pair that person with any of the
          remaining <m>2n-3</m> unpaired people. Continuing in this way, once <m>k</m> pairs have
          been selected, take the next unpaired person from the list and pair that
          person with any of the remaining <m>2n-2k-1</m> unpaired people. Every pairing
          can arise in this way, and no pairing can arise twice in this process. Thus
          the number of outcomes is <m>\prod_{i=0}^{n-1} 2n-2i-1</m>.
        </p>
      </solution>
    </task>
    <task>
      <p>
        Suppose that in addition to specifying who plays whom, for each
          pairing we say who serves first.  Now in how many ways may we
          specify our pairs?
      </p>
    </task>
  </exploration>

  <!-- bogart: -->
  <exploration>
    <statement>
      <p>
        A roller coaster car has <m>n</m> rows of seats, each of which
        has room for two people. If <m>n</m> men and <m>n</m> women get into the car with a man and a woman in each row, in how many ways may they choose their seats?
      </p>
    </statement>
    <hint>
      <p>
        In how many ways may you assign the men to their rows? The women? Once a woman and a man have a row to share, in how many ways may they choose their seats?
      </p>
    </hint>

    <solution>
      <p>
        <m>(n!)^2 2^n</m>.  First, form two lines of <m>n</m> women and <m>n</m> men.  Each of these lines can be formed in <m>n!</m> ways, so the total number of pairs of lines is <m>(n!)^2</m>.  Now have the newly formed couples enter the coaster in order, but for each pair, decide whether the woman sits to the left or the right of the man.  So for each pair, we have 2 choices, for a total of <m>2^n</m> ways the lined-up couples can sit in the coaster car.
      </p>
    </solution>
  </exploration>

<!-- bogart -->
  <example>
    <statement>
      <p>
        Here are two counting problems, easier than the last two activities, that will lead us to an important general principle.
        <ol>
          <li>
            <p>
              In how many ways can we pass out <m>k</m> distinct pieces of
              fruit to <m>n</m> children (with no restriction on how many pieces of fruit a child may
              get)?
            </p>
          </li>
        
          <li>
            <p>
              Assuming <m>k\le n</m>, in how many ways can we pass out <m>k</m>
              distinct pieces of fruit to
              <m>n</m> children if each child may get at most one? What is the number if <m>k \gt n</m>? Assume for both questions that we pass out all the fruit.
            </p>
          </li>
        </ol>
      </p>
    </statement>
    <solution>
      <p>
        <ol>
          <li>
            <p>
              We must decide on a child for each piece of fruit.  There are <m>n</m> choices for the first piece of fruit, <m>n</m> choices for the second, and so on.  The product principle says that there will be <m>n^k</m> ways to distribute the fruit.  
            </p>

            <p>
              Slightly more mathematically speaking, we are counting the number of functions from a set of cardinality <m>k</m> (the fuits) to a set of cardinality <m>n</m> (the children).  Note that it does not make sense to think of the ways we can send the children to the fruit, since we do not require that every child gets a fruit, and we insist that all fruit is distributed.
            </p>
          </li>

          <li>
            <p>
              The only thing that changes for the second part is that no child can get more than one piece of fruit.  So while we have <m>n</m> choices for the first piece of fruit, we only have <m>n-1</m> for the second, and <m>n-2</m> for the third.  Continuing until all the fruit is gone gives us a total of,
              <me> n \cdot (n-1) \cdot (n-2) \cdot \cdots \cdot (n-k+1) = \frac{n!}{(n-k)!} </me>
              ways to distribute the fruit.
            </p>
            <p>
              If <m>k \gt n</m>, then the left-hand-side still works: one of the terms will be 0, and indeed, if there is more fruit than children, there is no way to pass out all the fruit while ensuring that each kid gets at most one fruit.
            </p>
          </li>
        </ol>
      </p>
    </solution>
  </example>



    <p>
      The last question is an example of a <term>permutation</term>.  We are asking how to arrange <m>k</m> of the <m>n</m> kids (arranged by which fruit they get).  There are <m>n!</m> ways to arrange <m>n</m> elements, so there are <m>n!</m> permutations of <m>n</m> elements.  Often we only want to arrange some of these, so we would consider a <m>k</m>-permutation.   We will use this often enough that it deserves its own notation.
    </p>

    <assemblage xml:id="assemblage-permutation">
      <title><m>k</m>-permutations of <m>n</m> elements</title>
      <p>
        <m>P(n,k)</m> is the number of <m>k</m>-permutations of <m>n</m> elements, the number of ways to <em>arrange</em> <m>k</m> objects chosen from <m>n</m> distinct objects.
        <me>
          P(n,k) = n\cdot (n-1) \cdot (n-2) \cdot \cdots \cdot (n-k+1) = \frac{n!}{(n-k)!}.
        </me>

      </p>
    </assemblage>

    <p>
      Some other examples of questions where the answer is a permutation:
      <ul>
        <li>
          <p>
            How many 5-letter <q>words</q> (i.e., strings of symbols) contain no repeated letters?  There are 26 choices for the first letter, 25 for the second, 24 for the third, 23 for the fourth and 22 for the fifth, so there are <m>26\cdot 25 \cdot 24 \cdot 23 \cdot 22 = P(26,5)</m> such words.
          </p>
        </li>
        <li>
          <p>
            How many different shuffled decks of cards are possible?  There are 52 choices for the bottom card, 51 for the next, and so on.  So the answer is <m>P(52,52) = 52!</m>
          </p>
        </li>
        <li>
          <p>
            How many <em>injective</em> functions from <m>[k]</m> to <m>[n]</m> are there?  There are <m>n</m> choices for where 1 is sent, <m>n-1</m> choices for where <m>2</m> is sent (since the function is injective, 2 cannot be sent to the same element as 1), and so on.  So the answer is <m>P(n,k)</m>.
          </p>
        </li>
      </ul>
    </p>

    <p>
      While we are looking at permutations, let's also consider their counterpart, <em>combinations</em>. The key distinction is that while a permutation counts different arrangements as different outcomes, a combination does not.  Combinations are <em>selecting</em>, while permutations are <em>arranging</em> (and also selecting).
    </p>

    <activity>
      <introduction>
        <p>
          Suppose you have 17 books strewn around your room.  You resolve to get organized.
        </p>
      </introduction>
      <task>
        <statement>
          <p>
            You decide to throw 10 books in the trash.  How many choices do you have for which books to get rid of?
          </p>
        </statement>
        <hint>
          <p>
            We are not necessarily looking for a numerical answer here, but you should be able to express the answer using notation we have developed already.  Or by using some sort of triangle.
          </p>
        </hint>
      </task>
      <task>
        <p>
          You think twice about tossing your books, and you find a bookshelf that can hold 10 books.  How many ways can you fill the bookshelf?
        </p>
      </task>
      <task>
        <statement>
          <p>
            How many ways could you fill the 10 book bookshelf if the books were arranged alphabetically?
          </p>
        </statement>
        <hint>
          <p>
            Should your answer be larger or smaller than if the books could be in any order?  How is this any different from throwing the books away?
          </p>
        </hint>
      </task>
    </activity>

    <p>
      Hopefully you realized that the number of <m>k</m>-combinations of <m>n</m> elements is just <m>\binom{n}{k}</m>.  This makes sense: you just need to choose which elements to take, you don't need to arrange them.
    </p>

    <p>
      Notice though that combinations and permutations <em>are</em> related in some way.  What is that way?  Well, once you have chosen <m>k</m> elements from an <m>n</m>-element set, you could then <em>arrange</em> those <m>k</m> elements to get a permutation.
    </p>

    <activity>
      <introduction>
        <p>
          How many 5-letter words can be made with distinct letters?
        </p>
      </introduction>
      <task>
        <p>
          Explain why the answer is <m>P(26,5)</m>.
        </p>
      </task>
      <task>
        <p>
          Explain why the answer is also <m>\binom{26}{5}\cdot 5!</m>.
        </p>
      </task>
      <task>
        <statement>
          <p>
            Express <m>P(26,5)</m> as the quotient of two factorials.  Use this to find a numerical value for <m>\binom{26}{5}</m>.
          </p>
        </statement>
        <hint>
          <p>
            You have <m>P(26,5) = \binom{26}{5}\cdot 5!</m>.  You know that <m>P(26,5) = \frac{26!}{21!}</m>, so you should be able to easily <q>solve</q> for <m>\binom{26}{5}</m>.
          </p>
        </hint>
      </task>
    </activity>

    <p>
      There is nothing special about 26 and 5 in the above activity.
    </p>

    <theorem xml:id="thm_comb-form">
      <statement>
        <p>
          <m>P(n,k) = \binom{n}{k}\cdot k!</m>, and therefore <me>\binom{n}{k} = \frac{n!}{(n-k)!\cdot k!}</me>.
        </p>
      </statement>
    </theorem>

    <exploration xml:id="act-binomformula">
      <statement>
        <p>
          Give a combinatorial proof for the identity <m>P(n,k) = \binom{n}{k}\cdot k!</m>, thus proving <xref ref="thm_comb-form"/>.
        </p>
      </statement>
    </exploration>

    <p>
      Notice that the only thing we needed to find the algebraic formula for binomial coefficients was the product principle and a willingness to solve a counting problem in two ways.  In <xref ref="sec_basic-quotient"/> we will consider this formula again from the other direction.  
    </p>

    <p>
      There are non-combinatorial proofs of this formula as well.
    </p>

    <exploration>
      <statement>
        <p>
          Use the binomial theorem and the fact that <m>(x+1)^n = (x+1)^{n-1} + x(x+1)^{n-1}</m> to derive the factorial formula
          <me>
            \binom{n}{k} = \frac{n!}{(n-k)!k!}
          </me>.
        </p>
      </statement>
    </exploration>

  </subsection>



  <subsection xml:id="subsec-moreproofs">
    <title>More Proofs</title>
    <!-- Expand some of these as examples. -->
    <p>
      We will use the proof techniques of double counting and bijections throughout the rest of the book, but for now, let's practice a bit.  The activities below ask you to give a combinatorial proof, and often also an alternative proof that has some nice features.
    </p>





      <example xml:id="act-redgreenballs">
          <statement>
            <p>
            Prove the identity <m>\binom{2n}{2} = 2 \binom{n}{2} + n^{2}</m>.
            </p>
          </statement>
          <hint>
            <p>
              Think of selecting two balls from a set of <m>n</m> distinct red balls and <m>n</m> distinct green balls.
            </p>
          </hint>
        <solution>
          <p>
            Split the <m>2n</m> objects into two groups <m>A</m> and <m>B</m> each of size <m>n</m>.
          </p>

        <p>
          First, you can choose 2 objects from a set of <m>2n</m> objects
          in <m>\binom{2n}{2}</m> ways. Alternatively, you could select two from group <m>A</m> in <m>\binom{n}{2}</m> ways or two from group <m>B</m> in <m>\binom{n}{2}</m> ways or take one from each in <m>n \cdot n = n^{2}</m> ways. Now add <m>\binom{n}{2} + \binom{n}{2}+ n \cdot n</m> and the result follows.
        </p>
      </solution>
      </example>

      <p>
        The reader should attempt an algebraic proof of the above result using the factorial formula for <m>\binom{n}{k}</m>.
      </p>

      <exploration xml:id="act-bowtiefez">
          <statement>
            <p>
              Prove the identity <m>\binom{m + n}{2} - \binom{m}{2} - \binom{n}{2} = mn</m>.
            </p>
          </statement>
            <hint>
              <p>
                The <m>mn</m> looks like an application of the product principle.  Say you had <m>m</m> bow ties and <m>n</m> fezzes.  What question should you ask, and why does the other side also answer this?  Alternatively, consider how this identity relates to that of <xref ref="act-redgreenballs"/>.
              </p>
            </hint>
          <solution>
            <p>
              Suppose you have a set of <m>m</m> bow ties and <m>n</m> fezzes and you want to form fez-bow tie outfits. This can clearly be done in <m>mn</m> ways. Or, you could choose 2 from the total of <m>m + n</m> items and delete the bow tie only pairs (there are <m>\binom{m}{2}</m> of these) and delete the fez only pairs (also <m>\binom{n}{2}</m> of these). Since we have counted this one set with two different expressions (the left hand side and the right hand side of the identity), those expressions are equal.
            </p>
          </solution>
        </exploration>

        <p>
          You could also attempt an algebraic proof or perhaps a geometric proof making use of figures consisting of triangular numbers (we will return to this identity at the end of the section to illustrate this). Also, as a challenge, the reader could formulate a similar result involving <m>\binom{a + b + c}{3}</m> and a corresponding proof.
        </p>

        <exploration>
          <statement>
            <p>
            We have already proved this identity: <m>\binom{n}{0} + \binom{n}{1} + \binom{n}{2} + \ldots + \binom{n}{n} = 2^{n}</m>.  Now try giving a combinatorial proof that uses lattice paths.
            </p>
          </statement>
          <hint>
            <p>
              You will want to consider a lot of lattice paths, not all ending at the same point.  In fact, what do all the lattice paths have in common?
            </p>
          </hint>
          <solution>
            <p>
              The question is, how many lattice paths start at (0,0) and end on the line <m>x+y=n</m> (in the first quadrant)?
            </p>
          </solution>
        </exploration>

        <p>
          Becoming an expert in combinatorial proofs will help you solve actual counting problems.  For example, you might wonder how many positive integers have their digits in strictly increasing order.
        </p>

        <exploration>
          <statement>
            <p>
              Prove that the number of positive integers that have their digits in strictly increasing order is <m>2^{9} - 1</m>. Include single digit numbers.
            </p>
          </statement>
          <hint>
            <p>
              The answer looks like it might be almost the sum of a row in Pascal's triangle.  Why does this make sense?  You could think of including, or excluding numbers.
            </p>
          </hint>
          <solution>
            <p>
              There are <m>\binom{9}{1}</m> single digit type, <m>\binom{9}{2}</m> double digit type (just select 2 of the 9 digits <m>1, 2, 3, \ldots, 9</m> and arrange in order), <ellipsis />, and so on to see that there are <m>\binom{9}{9}</m> nine digit type. The total is <m>\binom{9}{1} + \binom{9}{2} + \binom{9}{3} + \ldots + \binom{9}{9} = 2^{9} - 1</m>.
            </p>
            <p>
              Here is an alternative, more clever, proof. Look at 123456789. Any increasing number can be made by deleting <em>any</em> subset of digits, except all of them. There are <m>2^{9} - 1</m> such subsets. For example, delete the subset \{2, 4, 7, 9\} and you get 13568. Combining these two approaches actually gives you a nice proof that <m>\binom{9}{0} + \binom{9}{1} + \binom{9}{2} + \ldots + \binom{9}{9} = 2^{9}</m>.
            </p>
          </solution>
        </exploration>

        <p>
          Now back to some combinatorial proofs.
        </p>

        <example xml:id="act_anysizecommittee">
          <statement>
            <p>
              Prove <m>\binom{n}{1} + 2 \binom{n}{2} + 3 \binom{n}{3} + \ldots + n \binom{n}{n} = n2^{n - 1}</m>.
            </p>
          </statement>
          <!-- <hint>
            <p>
              What if some number of a group of <m>n</m> people wanted to go to an escape room, and among those going, one needed to be the team captain?
            </p>
          </hint> -->
          <solution>
            <p>
              Given a set of <m>n</m> people we can select a committee of size <m>k</m> along with a chair from that committee in <m>k \binom{n}{k}</m> ways. We can select a committee (of size 1, or size 2, or <ellipsis />) and its chair in <m>\binom{n}{1} + 2 \binom{n}{2} + 3 \binom{n}{3} + \ldots + n \binom{n}{n}</m> ways. Alternatively, we can explain the term <m>n2^{n - 1}</m> as follows: choose one of the <m>n</m> people to chair any of the <m>2^{n - 1}</m> subsets of the remaining <m>n - 1</m> people.
            </p>
          </solution>
        </example>

        <p>
          Some other ways to approach the previous identity might be one or more of the following: <m>n2^{n - 1}</m> looks like a derivative, so try differentiating <m>\left( 1 + x \right)^{n}</m>; a reverse and add approach also works; or, first prove <m>k \binom{n}{k} = n \binom{n - 1}{k - 1}</m> and then use it.
        </p>

        <exploration>
          <statement>
            <p>
              Prove the Pascal recurrence: <m>\binom{n}{k} = \binom{n - 1}{k-1} + \binom{n - 1}{k}</m>.  Do this in two ways, first with a double counting style proof, and then a bijective proof.
            </p>
          </statement>
          <hint>
            <p>
              Bit strings are nice here.  What could the last bit of the bit string be?
            </p>
          </hint>
          <solution>
            <p>
              <!-- TODO: write new solution here -->
              <m>\binom{n}{k}</m> is the number of subsets of <m>\{ a_{1},a_{2},a_{3},\ldots,a_{n}\}</m> of size <m>k</m>.
              Now a subset <m>A</m> of size <m>k</m> either contains the fixed element <m>a_{i}</m> or it does not. If <m>A</m> contains <m>a_{i}</m>, the remaining <m>k - 1</m> elements can be selected in <m>\binom{n - 1}{k - 1}</m> ways.
              If, on the other hand, <m>A</m> does not contain <m>a_{i}</m>, you can choose the <m>k</m> elements from the depressed set <m>\left\{ a_{1},a_{2},\ldots,a_{i - 1,}a_{i + 1,\ldots,}a_{n} \right\}</m> in <m>\binom{n - 1}{k}</m> ways. Since these two cases are mutually exclusive the theorem follows.
            </p>
          </solution>
        </exploration>

        <p>
          The above activity illustrates another important reason to use combinatorial proofs: to establish recurrence relations.  The next identity is also a recurrence, this time about <em>derangements</em>.
        </p>

        <example>
          <statement>
            <p>
              A <term>derangement</term> of a set of elements is a permutation of those elements so that no element appears in its original position.  For example, a derangement of <m>[4]</m> might be <m>3,1,4,2</m>, but the permutation <m>3,2,4,1</m> is not a derangement because <m>2</m> is still in the second position.
            </p>
            <p> Let <m>d_{n}</m> denote the number of derangements of <m>[n]</m>.  We will take <m>d_{0} = 1</m> and <m>d_{1} = 0</m>.  Prove that <m>d_{n} = (n - 1)(d_{n - 1}+ d_{n - 2})</m> for <m>n \geq 2</m>.
            </p>
          </statement>
          <!-- <hint>
            <p>
              Where can <m>n</m> go?
            </p>
          </hint> -->
        <solution>
          <p>
            In forming a derangement of <m>1, 2, 3, \ldots, n</m> the integer <m>n</m> can be placed in any of the <m>n - 1</m> spots <m>1, 2, 3, \ldots, n - 1</m>, say spot <m>i</m>. If <m>i</m> goes into spot <m>n</m> there are <m>d_{n - 2}</m> ways to finish it. If <m>i</m> does not go into spot <m>n</m> there are <m>d_{n - 1}</m> ways to complete the derangement.
          </p>
        </solution>
      </example>

      <p>
        Later we will use the Principle of Inclusion/Exclusion to derive a formula for <m>d_{n}</m> from which the new recursion <m>d_{n} = nd_{n - 1} + \left( - 1 \right)^{n}</m>, and the above recursion, can be derived.
      </p>

      <p>
        Let's get back to binomial identities.
      </p>

      <example xml:id="eg_binom-squares-sum">
        <statement>
          <p>
            Prove, <m>\binom{n}{0}^{2} + \binom{n}{1}^{2} + \binom{n}{2}^{2} + \ldots + \binom{n}{n}^{2} = \binom{2n}{n}</m>.
          </p>
        </statement>
        <hint>
          <p>
            First note that <m>\binom{n}{k}^2 = \binom{n}{k}\binom{n}{n-k}</m>, by the symmetry of Pascal's triangle.  Then, there is a nice proof using lattice paths here, or you select <m>n</m> things from a collection that has <m>n</m> things of one type and <m>n</m> of another.
          </p>
        </hint>
        <solution>
          <p>
            Given a group of <m>2n</m> people consisting of <m>n</m> men and <m>n</m> women, in how many ways can one choose a group of <m>n</m> people? The answer to that question is just <m>\binom{2n}{n}</m>, the right side of the identity in question.
            One could also form the group of <m>n</m> people in the following way:
            choose 0 men and <m>n</m> women in <m>\binom{n}{0} \binom{n}{n} = \binom{n}{0}^{2}</m> ways, or, choose 1 man and <m>n - 1</m> women in <m>\binom{n}{1} \binom{n}{n - 1} = \binom{n}{1}^{2}</m> ways,
            or choose 2 men and <m>n - 2</m> women in <m>\binom{n}{2} \binom{n}{n - 2} = \binom{n}{2}^{2}</m> ways and so on.
            Now add these disjoint cases.
          </p>
          <p>
            An alternate algebraic proof is less interesting: Extract the
            coefficient of <m>x^{n}</m> from both sides
            of <m>\left\lbrack \left( x + 1 \right)^{n} \right\rbrack^{2} = \left(x + 1 \right)^{2n}</m>
          </p>
        </solution>
      </example>

          <p>
            Here is a interesting use of the previous identity, inside an unexpected proof.
          </p>

        <example>
          <statement>
            <p>
              Find a nice expression for the sum
              <me>\binom{n}{1}^2 + 2 \binom{n}{2}^2 + 3 \binom{n}{3}^2 + \cdots + n\binom{n}{n}^2
              </me>.
            </p>
          </statement>
          <solution>
            <p>
              We use the <q>reverse and add technique</q>, which we will see in <xref ref="subsec-recursionclosed"/> is usually reserved for summing arithmetic sums.  Surprisingly, it works here.
            </p>

        <sidebyside>
        <tabular>
          <col halign="right"/><col halign="left"/><col halign="left"/><col halign="left"/>
          <row>
            <cell><m>S  =</m></cell>
            <cell></cell>
            <cell><m>\binom{n}{1}^2+2\binom{n}{2}^2+3\binom{n}{3}^2 + </m></cell>
            <cell><m>\cdots +(n-1)\binom{n}{n-1}^2+n\binom{n}{n}^2</m></cell>
          </row>
          <row bottom="minor">
            <cell><m>+ \quad S  =</m></cell>
            <cell><m>n\binom{n}{n}^2 + </m></cell>
            <cell><m>(n-1)\binom{n}{n-1}^2+ \cdots +</m></cell>
            <cell><m>2\binom{n}{2}^2+\binom{n}{1}^2</m></cell>
          </row>
          <row>
            <cell><m>2S  =</m></cell>
            <cell><m>n\binom{n}{0}^2 + </m></cell>
            <cell><m>n\binom{n}{1}^2 + n\binom{n}{2}^2+ n\binom{n}{3}^2 + </m></cell>
            <cell><m>\cdots + n\binom{n}{n-1}^2+n\binom{n}{n}^2</m></cell>
          </row>
        </tabular>
      </sidebyside>
      <p>
        This uses the identity <m>\binom{n}{k} = \binom{n}{n-k}</m>.  Now factor out an <m>n</m> to get <me>2S = n\left[\binom{n}{0}^{2} + \binom{n}{1}^{2} + \binom{n}{2}^{2} + \ldots + \binom{n}{n}^{2}\right]</me>. 
        Apply the identity in <xref ref="eg_binom-squares-sum"/> and divide by 2 to get
        <me>S = \frac{n}{2}\binom{2n}{n}</me>.
      </p>
      </solution>
        </example>

        <p>
          The next identity is an example of the famed <term>Hockey Stick Theorem</term> (find this identity in Pascal's triangle!).  
        </p>

        <exploration>
          <statement>
            <p> Prove 
              <m>\binom{2}{2} + \binom{3}{2} + \binom{4}{2} + \ldots + \binom{n}{2} = \binom{n + 1}{3}</m>.
            </p>
          </statement>
          <hint>
            <p>
              Try bit strings here.  What length and weight are we looking at?  Where might the first (left-most) one be?
            </p>
          </hint>
          <solution>
            <p>
              The term <m>\binom{n + 1}{3}</m> is the number of binary strings of length <m>n + 1</m> consisting of three 1's (and the rest 0's). The left hand side counts these by where in the string the left-most 1 appears. Let <m>a_{1}a_{2}a_{3}\ldots a_{n + 1}</m> be a string of length <m>n + 1</m>. There are <m>\binom{n}{2}</m> strings when <m>a_{1} = 1</m>, <m>\binom{n - 1}{2}</m> strings when <m>a_{2} = 1</m> is the leftmost 1, and so on, up to <m>\binom{2}{2}</m> strings when <m>a_{n - 1} = 1</m> is the leftmost 1. In this last case the string looks like <m>000\ldots 0111</m>.
            </p>
          </solution>
        </exploration>

        <p>
          For a non-combinatorial proof of the Hockey Stick Theorem, a proof by mathematical induction is an easy option. An algebraic approach is not!
        </p>

        <p>
          If you spend enough time working on these proofs, you might find yourself discovering new identities that use the same basic setup.  You can take the proof you gave for the Hockey Stick Theorem and with a small tweak, get the following.
        </p>

        <example>
          <statement>
            <p>
              Prove <m>1\cdot n + 2 \cdot (n-1) + 3 \cdot (n-2) + \cdots + n \cdot 1 = \binom{n+2}{3}</m>
            </p>
          </statement>
          <!-- <hint>
            <p>
              You could use bit strings again, but this time think about where the second 1 could go.  Or for variety, why not try asking about subsets of <m>[n+2]</m>?
            </p>
          </hint> -->
          <solution>
            <p>
              You should try to use bit strings again, but this time think about where the <em>second</em> 1 (from the left) in the bit string could go.  Or for variety, why not try asking about subsets of <m>[n+2]</m>?
            </p>
            <p>
                Let <m>S = \{1,2,\ldots,n + 2\}</m>. The number of subsets of <m>S</m> of size 3 is <m>\binom{n + 2}{3}</m>. Each one looks like <m>\{a, b, c\}</m> with <m>a \lt b \lt c</m>.
                Let's count these by looking at the size of the middle element <m>b</m>. If <m>b=2</m>, there is one choice for <m>a</m>, namely <m>a=1</m> and <m>n</m> choices for <m>c</m> for a total of <m>1 \cdot n</m>. If <m>b=3</m> there are 2 choices for <m>a</m>, and <m>n - 1</m> choices for <m>c</m> for a total of <m>2(n - 1)</m>. If <m>b=4</m> the total is <m>3(n - 2)</m>, and so on. The total derived by looking at cases is <m>1 \cdot n + 2\left( n - 1 \right) + 3\left( n - 2 \right) + \ldots + n \cdot 1</m> and this must equal <m>\binom{n + 2}{3}</m> since the cases are disjoint.
            </p>
          </solution>
        </example>

      <exploration>
        <statement>
          <p>
            The proof using subsets we gave for the previous identity asked about 3-element subsets of <m>[n+2]</m>.  What if we looked at 5-element subsets of <m>[n+3]</m> and considered which the middle (third) number was?  Write a binomial identity, with a proof, that uses this idea.
          </p>
        </statement>
        <hint>
          <p>
            The identity you should try to prove is 
            <me>\binom{2}{2}\binom{n}{2} + \binom{3}{2}\binom{n-1}{2} + \cdots + \binom{n}{2}\binom{2}{2} = \binom{n+3}{5}.</me>
          </p>
        </hint>
      </exploration>

      <!-- <activity>
        <statement>
          <p>
            <m>\binom{3n}{3} = 3 \binom{n}{3} + 6n \binom{n}{2} + n^{3}</m>.
          </p>
        </statement>
        <hint>
          <p>
            Compare to <xref ref="act-redgreenballs"/>.  What if you also have yellow balls?
          </p>
        </hint>
        <solution>
          <p>
            Suppose you have <m>n</m> bow ties, <m>n</m> fezzes and <m>n</m> pairs of sun glasses and you want to select three of the accessories.  There are <m>\binom{3n}{3}</m> ways to do this.  Or you could  select three bow ties, three fezzes or three pairs of sun glasses in <m>3 \binom{n}{3}</m> ways, or two of one and one of the other in  <m>6n \binom{n}{2}</m> ways, or one of each in <m>n^3</m> ways.
          </p>
        </solution>
      </activity> -->

        <exploration>
          <statement>
            <p> Prove 
              <m>1 \cdot 1! + 2 \cdot 2! + 3 \cdot 3! + \ldots + n \cdot n! = \left( n + 1 \right)! - 1</m>.
            </p>
          </statement>
          <hint>
            <p>
              In how many ways can you arrange the <m>n+1</m> numbers <m>0, 1, 2, \ldots, n</m> so that they are <em>not</em> in ascending order?
            </p>
          </hint>
          <solution>
            <p>
              In how many ways can you arrange the <m>n+1</m> numbers <m>0, 1, 2, \ldots, n</m> so that they are <em>not</em> in ascending order?
              The answer is <m>\left( n + 1 \right)! - 1</m> since <m>0, 1, 2, \ldots, n</m> is the <em>only</em> arrangement in ascending order. Now lets separate into cases.
              Let <m>a_{0},a_{1},a_{2},\ldots,a_{n}</m> represent an arrangement of these <m>n+1</m> numbers. If <m>a_{0} \neq 0</m>, there are <m>n</m> choices left for <m>a_{0}</m>, and then <m>n!</m> ways to fill out <m>a_{1},a_{2},\ldots,a_{n}</m> for a total of <m>n \cdot n!</m>.
              Now let <m>a_{0} = 0</m> but <m>a_{1} \neq 1</m>.
              There are <m>n - 1</m> choices for <m>a_{1}</m> and <m>\left(n - 1 \right)!</m> ways to complete for a total of <m>\left(n - 1 \right)\left(n - 1 \right)!</m>.
              Now continue with <m>a_{0} = 1,a_{1} = 1</m> but <m>a_{2} \neq 2</m>.
              There are <m>\left(n - 2 \right)\left(n - 2 \right)!</m> ways, and so on.
            </p>
          </solution>
        </exploration>

        <p>
          The previous identity can also be established using an inductive proof, or through a clever collapsing sum as follows.
        </p>

        <example>
          <p>
            To compute the sum <m>1\cdot 1! + 2 \cdot 2! + \cdots + n \cdot n!</m>, note that <m>(n+1)! - n! = n\cdot n!</m> (just factor out an <m>n!</m>).  This then makes the sum
            <me>(2! - 1!) + (3! - 2!) + \cdots + ((n+1)! - n!) = (n+1)! - 1 </me>. 
          </p>
        </example>


        <exploration>
          <statement>
            <p>
              Prove the identity: <m>k \binom{n}{k} = n \binom{n - 1}{k - 1}</m>.
            </p>
          </statement>
          <hint>
            <p>
              Look back at <xref ref="act_anysizecommittee"/>.  This one is easier.
            </p>
          </hint>
          <solution>
            <p>
              Suppose you have a group of <m>n</m> people and you wish to form a subcommittee of <m>k</m> people with one of those <m>k</m> people to serve as chair. Choose the subcommittee in <m>\binom{n}{k}</m> ways and the chair in <m>k</m> ways. The product rule gives <m>k \binom{n}{k}</m> as the number of ways of selecting such a chaired subcommittee.
            </p>
            <p>
              Alternatively, you could first choose any one of the <m>n</m> people to serve as chair and then fill out the committee in <m>\binom{n - 1}{k - 1}</m> ways. There are <m>n \binom{n - 1}{k - 1}</m> ways to select a chaired subcommittee. Hence <m>k \binom{n}{k} = n \binom{n - 1}{k - 1}</m>.
            </p>
          </solution>
        </exploration>


        <!-- <theorem>
          <statement>
            <p>
              <m>P(n,k) = k!\binom{n}{k}</m>.

            </p>
          </statement>
          <proof>
            <p>
              Question: How many permutations are there of <m>k</m> objects chosen from a collection of <m>n</m> objects? The LHS answers the question. There are <m>P(n,k) = n(n - 1)(n - 2)\cdots(n - k + 1)</m> ways. Alternatively, one could first choose the <m>k</m> objects from the <m>n</m> objects in <m>\binom{n}{k}</m> ways and then permute these in <m>k!</m> ways.
            </p>
          </proof>
        </theorem> -->

        <!-- <activity>
          <statement>
            <p>
              <m>n2^{n - 1} = 1 \binom{n}{1} + 2 \binom{n}{2} + 3 \binom{n}{3} + \ldots + n \binom{n}{n}</m>.
            </p>
          </statement>
          <solution>
            <p>
              Contrast this discussion with that presented in <xref ref="act_anysizecommittee"/>. Look at the set of the first <m>2^{n}</m> natural numbers <m>0,1,2,\ldots,2^{n} - 1</m>. When you convert each to binary form what is the total number of 1s written?
              This binary list will look like the standard listing in <m>B^{n}</m> the set of all binary strings of length <m>n</m>. For <m>n=3</m> <m>B^{3} = \{000,001,010,011,100,101,110,111\}</m>. In <m>B^{n}</m> each string has length <m>n</m> and there are <m>2^{n}</m> of them. But half of the <m>n \cdot 2^{n}</m> symbols are 1's. Then the total number of 1's is <m>n2^{n - 1}</m>. Alternatively, we could consider each string and count those with one 1, then those with two 1's, etc.
              There are <m>1 \cdot \binom{n}{1}</m> with one 1, <m>2 \binom{n}{2}</m> total 1's in those binary numbers with exactly two 1's, <m>3 \binom{n}{3}</m> in those with exactly three 1's, and so on.
              The total is <m>1 \binom{n}{1} + 2 \binom{n}{2} + 3 \binom{n}{3} + \ldots + n \binom{n}{n}</m>.  The result now follows by equating <m>n2^{n - 1}</m> to this sum.
            </p>
          </solution>
        </activity> -->


        <!-- <theorem>
          <statement>
            <p>
              <m>\binom{n}{0}^{2} + \binom{n}{1}^{2} + \binom{n}{2}^{2} + \cdots + \binom{n}{n}^{2} = \binom{2n}{n}</m>.
            </p>
          </statement>
          <proof>
            <p>
              Let's revisit this identity using equivalence relations. A binary relation <m>R</m> on the set of all binary strings of length <m>n</m> is defined by specifying that <m>(\alpha,\beta) \in R</m> whenever <m>\alpha</m> and <m>\beta</m> have the same weight. This <m>R</m> is an equivalence relation.
              For <m>n=3</m> there are four different equivalence classes, each containing strings of weight 0, 1, 2, or 3.
              The relation <m>R</m> contains <m>1^{2} + 3^{2} + 3^{2} + 1^{2}</m> ordered pairs; for example, with weight 1 each of the three strings 001, 010, 100 can be paired with any one of those same strings for a total of <m>3^{2} = 9</m>.
            </p>
            <p>
              These ordered pairs can be counted in another way. Each ordered pair looks like <m>(- - -,- - -)</m>.  Place 1's in any three positions, and 0's in the others.  If you take the complement of the entries in the second coordinate an element of <m>R</m> is produced.
              Here is what one sequence of this process looks like:
              <me>(- - -, - - -) \rightarrow (- 11,- - 1) \rightarrow (011,001) \rightarrow (011,110)</me>.
            </p>
            <p>
              The reader can check that this process always produces an element of <m>R</m> and that the case of <m>n=3</m> extends easily to general <m>n</m>. Conclusion: choose the <m>n</m> positions for 1's in <m>\binom{2n}{n}</m> ways. The result follows.
            </p>
          </proof>
        </theorem> -->

        <exploration xml:id="act_derangement-binom">
          <statement>
            <p> Prove 
              <m>\binom{n}{0} d_{0} + \binom{n}{1} d_{1} + \binom{n}{2} d_{2} + \ldots + \binom{n}{n} d_{n} = n!</m> where <m>d_{n}</m> denotes the <m>n</m>th derangement number, <m>d_{0} = 1,d_{1} = 0</m>.
            </p>
          </statement>
          <hint>
            <p>
              Think of partitioning the <m>n!</m> permutations.
            </p>
          </hint>
          <solution>
            <p>
              The right-hand side, <m>n!</m>, gives the number of permutations of <m>n</m> objects. So the left-hand side must provide the same enumeration. The left side partitions the permutations according to how many elements are deranged (and the rest fixed). The term <m>\binom{n}{i} d_{i} = \binom{n}{n - i} d_{i}</m> gives the number of permutations of <m>n</m> where <m>n - i</m> elements are fixed and the remaining <m>i</m> elements are deranged.
              Summing over all <m>i</m> yields
              <me>\binom{n}{n} d_{0} + \binom{n}{n - 1} d_{1} + \cdots + \binom{n}{0} d_{n} = \binom{n}{0} d_{0} + \binom{n}{1} d_{1} + \cdots + \binom{n}{n} d_{n} = n!</me>
            </p>
          </solution>
        </exploration>

        <!-- <p>
          Here is one that you might have found in <xref ref="sec_basic-pascal"/>.
        </p>

        <activity>
          <statement>
            <p>
              <m>F_{n + 1} = \binom{n}{0} + \binom{n - 1}{1} + \binom{n - 2}{2} + \cdots</m> where <m>F_{n}</m> denotes the <m>n</m>th Fibonacci number.
            </p>
          </statement>
          <solution>
            <p>
              Here is a question that might resolve the issue. How many different brick paths of length <m>n</m> (and width 1) can you make using <m>1\times 1</m> bricks and <m>1 \times 2</m> bricks? Let <m>a(n)</m> denote the number of such paths of length <m>n</m>. A few drawings will show that <m>a(1)=1</m>, <m>a(2)=2</m>, <m>a(3)=3</m>, <m>a(4)=5</m>. Since you can place a <m>1\times 1</m> brick in front of all paths of length <m>n - 1</m> or a <m>1\times 2</m> brick in front of all paths of length <m>n - 2</m> we have that <m>a(n) = a(n - 1) + a(n - 2)</m>. This recursion, along with the initial conditions, show that <m>a(n) = F_{n + 1}</m>, the left-hand side of the identity.
            </p>
            <p>
              Now lets look at all paths of length <m>n</m> and count them by the number of <m>1\times 2</m> bricks. If there are <m>i</m> <m>1\times 2</m> bricks there are <m>n - i</m> total bricks making up the path of length <m>n</m>. Choose the positions of the <m>i</m> <m>1\times 2</m> bricks in <m>\binom{n - i}{i}</m> ways. Now sum as <m>i</m> ranges through the values <m>0, 1, 2, \ldots</m> and obtain <m>\binom{n}{0} + \binom{n - 1}{1} + \binom{n - 2}{2} + \cdots = F_{n + 1}</m>.
            </p>
          </solution>

        </activity>



        <p>
          The reader should draw all paths of length <m>n = 5</m>, for example, and
          examine the cases with <m>i=0, 1, 2</m>. The reader could also explore other proofs.
        </p>
      -->

      <p>
        To close this section, let's return to a binomial identity we considered before, and consider a few additional proofs.
      </p>

        <example>
          <!-- <title>
              <m>\binom{m + n}{2} - \binom{m}{2} - \binom{n}{2} = mn</m> (revisited).
          </title> -->
 
            <p>
              We give three and a half proofs of the identity <m>\binom{m + n}{2} - \binom{m}{2} - \binom{n}{2} = mn</m>.
              <ol>
                <li>
                  <p>
                    How many lines that are not vertical or horizontal can you form by connecting the points that are on the positive <m>x</m> and <m>y</m> axes? 
                    </p>

                <sidebyside widths="20% 70%" valign="middle">
                  <image width="100%">
                    <latex-image>
                      \begin{tikzpicture} 
                        \draw (0,0) -- (0,4) (0,0) -- (5,0);
                        \foreach \x in {1,...,4}{
                          \foreach \y in {1,...,3} {
                            \draw (\x,0) -- (0,\y);
                            \draw[fill=black] (\x, 0) circle (1pt);
                            \draw[fill=black] (0, \y) circle (1pt);
                          }
                        }
                      \end{tikzpicture} 
                    </latex-image>
                  </image>

                    <p>
                    Since we really want only lines that are formed by connecting the <m>m</m> points with the <m>n</m> points, we could say we have <m>mn</m> lines. Or we could consider all <m>m + n</m> points and pick 2 in <m>\binom{m+n}{2}</m> ways and then delete those choices where you took 2 from <m>m</m> or 2 from <m>n</m>, since these formed vertical and horizontal lines, respectively.  Thus <m>\binom{m + n}{2} - \binom{m}{2} - \binom{n}{2} = mn</m>.
                  </p>
                  </sidebyside>
                </li>
                <li>
                  <p>
                    There are <m>mn</m> one by one squares in the subdivided <m>m</m> by <m>n</m> rectangle.  
                  </p>
                  <sidebyside widths="70% 20%" margins="0% 0%" valign="top">
                  <p>
                    Each choice of arrows (one horizontal, one vertical) specifies one of these squares.  Pick two arrows but don't take two from the top or two from the side.  Then <m>\binom{m + n}{2} - \binom{m}{2} - \binom{n}{2} = mn</m>.
                  </p>

                  <image>
                    <latex-image>
                      \begin{tikzpicture}
                        \draw (0,0) grid (5,4);
                        \draw[->] (3.5,5) -- (3.5,4.25);
                        \draw[->] (6,1.5) -- (5.25,1.5);  
                      \end{tikzpicture}
                    </latex-image>
                  </image>
                  </sidebyside>
                </li>
                <li>
                  <p>
                    Take <m>m</m> people in one group and <m>n</m> in another. How many handshakes can be accomplished? Among the <m>m</m> people there are <m>\binom{m}{2}</m> handshakes; among the <m>n</m> people there are <m>\binom{n}{2}</m> handshakes and between the two groups, <m>mn</m>. But, <m>\binom{m + n}{2}</m> also represents the total number of handshakes among the people. Then we get: <m>\binom{m}{2} + \binom{n}{2} + mn = \binom{m + n}{2}</m>.
                  </p>
                </li>
                <li>
                  <p>
                    For <m>m = 3</m> and <m>n = 5</m>:
                  </p>
                    <image width="30%">
                      <latex-image>
                          \begin{tikzpicture} 
                            \foreach \x in {0,...,6}{
                              \foreach \y in {0,...,\x}{
                                \draw (\x,\y) circle (2pt);
                              }
                            } 
                            \draw[dashed] (1.5,0) -- (1.5,2.5) -- (6,2.5);
                          \end{tikzpicture}
                      </latex-image>
                    </image>
                    <p>
                      Note that <m>\binom{3}{2} = 3</m> is the 2nd triangular number, <m>\binom{5}{2} = 10</m> is the 4th triangular number, and <m>\binom{8}{2}</m> is the 7th triangular number.
                    </p>
                  </li>
              </ol>
            </p>

        </example>
  </subsection>

  <subsection xml:id="subsec-non-comb-proofs">
    <title>Non-combinatorial Proofs in Combinatorics</title>
    
    <p>
      In this section we have stressed a particular style of proof unique to combinatorics: <em>combinatorial proof</em>.  As suggested a few place above, there are often other interesting proofs of combinatorial results that don't use this technique.  We close this section with a few more examples of particularly elegant, non-combinatorial proofs.
    </p>
    
    <p>
      We start with a well known theorem about the relationship between square and triangular numbers.
    </p>
    
    <theorem xml:id="thm-square-triangle-sum">
      <statement>
        <p>
          <m>n^2 = \binom{n}{2} + \binom{n+1}{2}</m>. 
        </p>
      </statement>
      <proof>
        <p>
          The key insight here is that <m>\binom{n+1}{2} = T_{n}</m>, the <m>n</m>th triangular number.  With this, there is an easy <q>picture proof.</q>  Here is the picture for <m>n = 4</m>:
        </p>
        <image width="30%" xml:id="square-triangle-sum">
          <latex-image>
            \begin{tikzpicture}
              \foreach \x in {0,...,3}{
                \foreach \y in {0,...,3}{
                  \draw[fill] (\x,\y) circle (2pt);
                }
              }
              \draw (0.5,0) -- (3,2.5);
            \end{tikzpicture}
          </latex-image>
        </image>
        <p>
          Using the factorial formula for <m>\binom{n}{k}</m> is also straight forward, although dull.
        </p>
      </proof>
    </theorem>
    
    <p>
      This result is surprisingly useful.
    </p>
    
    <example xml:id="eg-sum-of-squares">
      <statement>
        <p>
          Prove <m>1^2 + 2^2 + 3^2 + \cdots + n^2 = \binom{n+2}{3} + \binom{n+1}{3}</m>.
        </p>
      </statement>
      <solution>
        <p>
          The sum can be recharacterized using <m>n^2 = \binom{n}{2}+\binom{n+1}{2}</m> as follows:
          <md>
            <mrow> \amp 1^2 + \left[\binom{2}{2}+\binom{3}{2}\right]+ \left[\binom{3}{2} + \binom{4}{2}\right] + \cdots + \left[\binom{n}{2} + \binom{n+1}{2}\right] </mrow>
            <mrow> = \amp \left[\binom{2}{2} + \binom{3}{2} + \binom{4}{2} + \cdots + \binom{n+1}{2}\right] + \left[\binom{2}{2} + \binom{3}{2} + \cdots + \binom{n}{2}\right] </mrow>
            <mrow> = \amp \binom{n+2}{3} + \binom{n+1}{3}</mrow>
          </md>
          using the Hockey Stick Theorem twice.          
        </p>
      </solution>
    </example>
    
    <exploration>
      <statement>
        <p>
          Use <xref ref="thm-square-triangle-sum"/> to prove 
          <m> 1^2 + 3^2 + 5^2 + \cdots + n^2 = \binom{n+2}{3}</m> for odd <m>n</m>.
        </p>
      </statement>
    </exploration>
    
    <exploration>
      <statement>
        <p>
          The following identity has its roots in the problem of enumerating the number of squares in an <m>n</m> by <m>n+1</m> checkerboard.
          <me>
            1\cdot n^2 + 2(n-1)^2 + 3(n-2)^2 + \cdots + n\cdot 1^2 = \binom{n+2}{4} + \binom{n+3}{4}
          </me>.
          Prove this.
        </p>
      </statement>
      <hint>
        <p>
          Using <xref ref="eg-sum-of-squares"/> many times the left-hand side becomes can be decomposed as,
          <md>
            <mrow>1^2 + 2^2 + 3^2 + \cdots + n^2 = \amp \binom{n+1}{3} + \binom{n+2}{3} </mrow>
            <mrow> 1^2 + 2^2 + \cdots +(n-1)^2 = \amp \binom{n}{3} + \binom{n+1}{3}</mrow>
            <mrow> 1^2 + 2^2 + \cdots +(n-2)^2 = \amp \binom{n-1}{3} + \binom{n}{3}</mrow>
            <mrow> \vdots \amp \vdots </mrow>
            <mrow> 1^2 + 2^2 = \amp \binom{3}{3} + \binom{4}{3} </mrow>
            <mrow> 1^2 = \amp  \binom{3}{3} </mrow>
          </md>.
          What does this have to do with the problem and why does it help?  Add all the columns!  
        </p>
      </hint>
    </exploration>
    

  </subsection>
  

</section>
